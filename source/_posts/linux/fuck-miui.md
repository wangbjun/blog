---
title: 小米手机MIUI ROOT解除温控、火力全开
date: 2022-04-02 21:00:00
category: Linux
tags: Android
---
最近愈发觉得我用了差不多2年的手机红米k20 Pro打开应用速度反应很慢，偶尔还会有卡顿，这款手机搭载了高通骁龙855plus，8核CPU，最高主频2.96GHz，即使放在今天性能也不是很差，我平时很少拿来玩游戏，只是日常使用。

虽说手机用久了都会变卡，毕竟电子元器件存在性能衰减，不过问题其实也不是这么简单。MIUI系统很早就有省电模式、均衡模式、性能模式，熟悉Linux系统的人都知道这和Linux的CPU调度策略非常类似，当然这是废话，因为安卓内核就是Linux。。。

手机系统为了平衡功耗以及温度，会有很多种CPU调度策略，MIUI在平时使用的时候会根据运行软件的不同去执行不同的调度策略，比如一些日常软件的话主频会限制到2GHz，但打游戏的时候往往火力全开，但是火力全开手机温度就会上升，达到一定程度就会触发温控策略导致CPU降频，从而引起卡顿。

我这个机型的系统版本还取消了性能模式，默认以均衡模式运行，再加上小米保守的温控策略，根本没法发挥全部实力，作为一个技术宅已经忍了很久了，既然没钱换新手机那就动手解除封印，释放全部潜能再战1年！所以接下来，我会把这台手机root、之后再安装Scene4解锁来CPU限制，火力全开，最后再删除温控策略，尽可能的释放手机性能，提高流畅度。

理论上，手机CPU和GPU也能超频，不过这个玩法就太高端了，而且恐怕散热真的撑不住。。。

本人在折腾过程中也查看了不少教程，但是都比较零散细碎，所以这里总结了一下，以下教程适用于MIUI 12，虽然我的机型可能和大家不一样，但是大同小异，仅供参考。

<!--more-->

## 误区
因为用了很多年小米手机，以前小米手机开发版默认自带root，所以印象中以为只要刷个开发版就可以了，谁知道没那么简单，还需要解锁boot才行。

然后才发现稳定版也可以root，只是方法和开发版不太一样。

所以本人建议使用稳定版root，因为小米的开发版不是很稳，很可能有bug，而且更新比较频繁，更新的时候还可能会丢掉root权限。

## 1.解锁bootloader
以前小米手机是不锁boot的，比如小米3、小米4可谓刷机神器，那些年也没少折腾，但是时过境迁，现在小米为了安全考虑，都开始锁boot了，需要解锁之后才能刷机。

小米手机解锁boot还算比较简单，官网有明确的教程和工具提供下载，建议大家移步这里： https://www.miui.com/unlock/index.html

<img src="/images/2022/unlock.png" /> 

注意事项： 官网上面写了很多，请查看FAQ，这里简单提几句，比如在售的新机型一般需要等待，用户账号安全评分较低的需要等待，等待时间目前是7天起，如果本年度解锁手机数超过2台，等待时间会相应增长、一个小米账号每月限制解锁一台设备、一个小米账号每年限制解锁4台不同设备。

另外，这个解锁工具不支持win11...，建议使用win7或者win10。

先说几句题外话，很多教程会让你先刷第三方的recovery，其实可刷也可以不刷，如果你经常刷机折腾，可以刷一下，如果你像我一样只是为了root，那就没必要刷，小米自带的recovery也能凑合用。
## 2.下载官方原版镜像
这里需要用到官方原版的系统镜像，有2种方式获取，一种是去MIUI官网选择对应机型下载，另一种是打开手机设置-我的设备-MIUI版本-右上角-下载最新完整包，下载完成后会保存在 **Download/downloaded_rom** 文件夹。

使用系统自带的文件管理器找到镜像文件，是一个zip文件，将其解压，你会发现里面有一个名字为 **boot.img** 的文件，不要问我如果没有怎么办，没有那就裂开，这种方法不适合你，Game Over...

## 3.安装Magisk
建议去Github下载最新的版本，或者你可以使用我这保存的版本： <a href="/file/Magisk-v24.3.apk">点击下载 Magisk-v24.3.apk</a>

下载安装到手机，打开APP，你会发现下面这个界面，有一个安装按钮，点击会发现有2种方法，一种是选择并修补一个文件，另一种是直接安装。

<img width="40%" src="/images/2022/magisk.jpg" /> 

这里面我们使用选择并修补一个文件，选择刚才那个 **boot.img** 文件，经过一段时间处理之后会在同文件夹生成一个新的文件，名字类似 **magisk_patched-24300_uVoAh.img**

这里多说几句，第二种直接安装可以用于已经root的设备，比如说你是使用MIUI开发版获取的权限。（不推荐这种方式）

## 4.使用电脑刷机
> 说到这，我先展开说一下刷机的2种方式：卡刷和线刷。所谓线刷就是下面我说到这种方式，需要连接电脑来执行命令。而卡刷则是在手机先刷一个第三方recovery然后再刷机，其实recovery就是相当于电脑的BIOS界面，是一个更加底层，用来管理系统的系统。

> 如果采用卡刷的方法的话，那么这里就是先用电脑刷一个recovery，然后再卡刷其它系统来实现root，具体步骤感兴趣的可以研究，关键字提示：k20 Pro recovery。

用一根官方原版数据线连接电脑，不要用那些劣质的线，同时在手机上面打开USB调试，这个我就不多说了，大概就是快速点击MIUI版本，然后开发者模式-USB调试即可，如果这个都不会的话，说明你从未有过刷机经验，建议不要折腾了。

用电脑打开手机usb存储，找到上面生成的那个patched文件，复制到电脑上面一个文件夹里面，你得记住在哪，后面会用到。

当你打开usb调试的时候，手机上面会弹一个确认框，请务必同意，如果没有看见，那就拔了线再插上试试，接下来就需要使用adb工具刷机了，如果你是Linux或者Mac的话，直接安装一个adb和fastboot命令行工具就行。

以Ubuntu为例：
```shell
sudo apt install adb
sudo apt install fastboot
```
如果是Windows电脑，你可以下载我这里的工具包： <a href="/file/ADBTools.zip">点击下载 ADBTools.zip</a>

这里我假设你有终端使用经验，打开终端，cd到刚才保存那个patched文件的文件夹，执行 ```adb reboot bootloader```重启到fastboot界面，你也可以在关机状态下长按开机键和音量上键。

然后执行```fastboot flash boot magisk_patched-24300_uVoAh.img```命令开始刷机，如果没有报错的话，看到Ok信息之后重启手机即可。

开机之后打开刚才安装的magisk app，如果看到下面这个界面就说明已经成功了，其中 **超级用户** 菜单就是管理root权限的地方。

<img width="40%" src="/images/2022/success.jpg" /> 

## 5.安装Scene4和MIUI温控
建议大家官网下载，这里就不提供了安装包下载了

这个软件的功能很多，但是主要用来修改CPU调度，直接点击**极速**即可火力拉满，然后打开MIUI温控，点击 **淦** 解除封印。

<img width="40%" src="/images/2022/scene4.jpg" /> 
<img width="40%" src="/images/2022/wenkong.jpg" />

其它更多功能自行研究。。。

## 6.安全隐患
很多软件检测到你的设备root之后就会提示你也风险，有些甚至直接不给你使用（比如建设银行APP），站在公司开发者的角度来说确实可能有风险，但是安全这个事情主要还是靠个人，比如即使不root也不能随便安装一些来源未知的APP。

不过root权限确实非常重要，我们对于root权限的授权管理则要非常慎重，只有你明确知道需要root权限的APP才同意，其它的一律拒绝。

针对Scene4和MIUI温控这些搞机软件，我还完全禁用了其联网权限，其它权限也最小化。。。

<img width="40%" src="/images/2022/zygisk.jpg" /> 

另外，很多银行APP检测到手机root之后无法使用的情况，这里建议使用Magisk自带的 **Zygisk** 排除软件即可。

最后，说一下我的实际体验，在k20 Pro上面经过上述的操作之后流畅度提升很多，有一种丝滑的感觉，毕竟CPU主频提高了1个G，应用的打开速度也提升了很多，个人觉得值得一试，友情提示：折腾之前备份好数据。